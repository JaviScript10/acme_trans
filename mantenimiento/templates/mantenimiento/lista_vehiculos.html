{% extends 'mantenimiento/base.html' %}

{% block title %}Vehículos - ACME Trans{% endblock %}

{% block page_title %}Gestión de Vehículos{% endblock %}

{% block content %}
<div class="row mb-4">
  <div class="col-md-8">
    <h4><i class="fas fa-car"></i> Lista de Vehículos</h4>
  </div>
  <div class="col-md-4 text-end">
    <a href="{% url 'mantenimiento:agregar_vehiculo' %}" class="btn btn-primary">
      <i class="fas fa-plus"></i> Agregar Vehículo
    </a>
  </div>
</div>

{% if vehiculos %}
<div class="row">
  {% for vehiculo in vehiculos %}
  <div class="col-md-6 col-lg-4 mb-4">
    <div class="card h-100">
      <div class="card-body">
        <h5 class="card-title">
          <i class="fas fa-car text-primary"></i> {{ vehiculo.placa }}
        </h5>
        <h6 class="card-subtitle mb-3 text-muted">
          {{ vehiculo.marca }} {{ vehiculo.modelo }}
        </h6>
        <p class="card-text">
          <strong>Año:</strong> {{ vehiculo.año }}<br>
          <strong>Kilometraje:</strong> {{ vehiculo.kilometraje|floatformat:0 }} km<br>
          <strong>Registrado:</strong> {{ vehiculo.fecha_registro|date:"d/m/Y" }}
        </p>
      </div>
      <div class="card-footer">
        <div class="row">
          <div class="col-6">
            <a href="{% url 'mantenimiento:detalle_vehiculo' vehiculo.id %}"
              class="btn btn-outline-primary btn-sm w-100">
              <i class="fas fa-eye"></i> Ver Detalle
            </a>
          </div>
          <div class="col-6">
            <a href="{% url 'mantenimiento:editar_vehiculo' vehiculo.id %}"
              class="btn btn-outline-secondary btn-sm w-100">
              <i class="fas fa-edit"></i> Editar
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<div class="row mt-4">
  <div class="col-12">
    <div class="alert alert-info">
      <i class="fas fa-info-circle"></i>
      <strong>Total de vehículos registrados:</strong> {{ vehiculos.count }}
    </div>
  </div>
</div>

{% else %}
<div class="row">
  <div class="col-12">
    <div class="alert alert-warning text-center">
      <i class="fas fa-exclamation-circle fa-3x mb-3"></i>
      <h4>No hay vehículos registrados</h4>
      <p>Aún no tienes vehículos en el sistema. ¡Agrega el primero para comenzar!</p>
      <a href="{% url 'mantenimiento:agregar_vehiculo' %}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Registrar Primer Vehículo
      </a>
    </div>
  </div>
</div>
{% endif %}

<!-- Información adicional -->
<div class="row mt-4">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h6 class="mb-0"><i class="fas fa-lightbulb"></i> Consejos</h6>
      </div>
      <div class="card-body">
        <ul class="mb-0">
          <li>Mantén actualizado el kilometraje de cada vehículo</li>
          <li>Programa mantenimientos preventivos regulares</li>
          <li>Revisa el historial antes de nuevos mantenimientos</li>
        </ul>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h6 class="mb-0"><i class="fas fa-chart-bar"></i> Estadísticas Rápidas</h6>
      </div>
      <div class="card-body">
        {% if vehiculos %}
        <p><strong>Vehículo más nuevo:</strong> {{ vehiculos|first }}</p>
        <p class="mb-0"><strong>Total de vehículos:</strong> {{ vehiculos.count }}</p>
        {% else %}
        <p class="mb-0 text-muted">No hay datos disponibles</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}